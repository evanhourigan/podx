[build-system]
requires = ["setuptools>=69", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "podx"
version = "1.0.0"
description = "Composable podcast pipeline: fetch → transcode → transcribe → (align) → (diarize) → export"
readme = "README.md"
requires-python = ">=3.9"
license = { text = "MIT" }
authors = [{ name = "You" }]
dependencies = [
  "click~=8.3.0",
  "rich-click~=1.9.3",
  "rich~=14.1.0",
  "requests~=2.32.5",
  "feedparser~=6.0.12",
  "python-dateutil~=2.9.0",
  "soundfile~=0.13.1",
  "pydantic~=2.12.0",
  "pydantic-settings~=2.11.0",
  "tenacity~=9.1.2",
  "structlog~=25.4.0",
  "psutil~=7.1.0",
  "PyYAML~=6.0.3",
  "yt-dlp~=2025.9.26",
]

[project.optional-dependencies]
asr = ["faster-whisper~=1.2.0"]
whisperx = ["whisperx @ git+https://github.com/m-bain/whisperx.git"]
llm = ["openai~=2.2.0", "tiktoken~=0.12.0"]
notion = ["notion-client~=2.5.0"]
dev = [
  "pytest~=8.4.2",
  "pytest-asyncio~=1.2.0",
  "pytest-cov~=7.0.0",
  "ruff~=0.14.0",
  "mypy~=1.18.2",
  "types-requests~=2.32.4",
  "types-python-dateutil~=2.9.0",
]

[project.scripts]
podx-fetch = "podx.fetch:main"
podx-transcode = "podx.transcode:main"
podx-transcribe = "podx.transcribe:main"
podx-align = "podx.align:main"
podx-diarize = "podx.diarize:main"
podx-export = "podx.export:main"
podx-deepcast = "podx.deepcast:main"
podx-notion = "podx.notion:main"
podx-preprocess = "podx.preprocess:main"
podx-agreement = "podx.agreement:main"
podx-consensus = "podx.consensus:main"
podx-models = "podx.models:main"
podx-list = "podx.list:main"
podx = "podx.orchestrate:main"

[tool.setuptools.packages.find]
where = ["."]

[tool.ruff]
line-length = 100

[tool.pytest.ini_options]
addopts = "-q"
testpaths = ["tests"]
pythonpath = ["podx"]

[tool.mypy]
python_version = "3.9"
warn_unused_ignores = true
warn_redundant_casts = true
warn_unused_configs = true
disallow_untyped_defs = true
ignore_missing_imports = true
namespace_packages = true
explicit_package_bases = true
