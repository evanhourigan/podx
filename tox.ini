[tox]
# Test against Python 3.9, 3.10, 3.11, 3.12 (matching CI matrix)
envlist = py39,py310,py311,py312,lint
isolated_build = True
skip_missing_interpreters = True

[testenv]
# Install package with dev dependencies
extras =
    dev
    server
commands =
    # Run full test suite with coverage
    pytest tests/ --cov=podx --cov-report=term-missing --timeout=30 -v
# Set environment variables if needed
setenv =
    PYTHONPATH = {toxinidir}

[testenv:lint]
# Linting and formatting checks (same as CI)
skip_install = False
deps =
    ruff~=0.14.0
    black~=25.1.0
    isort~=5.13.0
    mypy~=1.18.2
commands =
    ruff check .
    black --check .
    isort --check-only .
    mypy podx --ignore-missing-imports

[testenv:format]
# Auto-format code (run this to fix linting issues)
skip_install = True
deps =
    black~=25.1.0
    isort~=5.13.0
commands =
    black .
    isort .

[testenv:py39]
# Minimum supported Python version - most important to test!
basepython = python3.9

[testenv:py310]
basepython = python3.10

[testenv:py311]
basepython = python3.11

[testenv:py312]
basepython = python3.12
